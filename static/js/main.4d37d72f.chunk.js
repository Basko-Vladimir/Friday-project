(this["webpackJsonpfriday-project"]=this["webpackJsonpfriday-project"]||[]).push([[0],{15:function(e,t,a){e.exports={header:"Header_header__1L4zS",navMenu:"Header_navMenu__11Gnm",active:"Header_active__2mxZT"}},20:function(e,t,a){e.exports={background:"Message_background__1_Cvs",message:"Message_message__2OSW_",error:"Message_error__j9aN1"}},23:function(e,t,a){e.exports={form:"SignIn_form__o7Htx",checkbox:"SignIn_checkbox__3Ub6U",background:"SignIn_background__11NxE"}},24:function(e,t,a){e.exports={body:"Loading_body__5qWIK",loadingProgress:"Loading_loadingProgress__149ZI"}},29:function(e,t,a){e.exports={container:"SignUp_container__29LBU",inputs:"SignUp_inputs__1TLkz"}},41:function(e,t,a){e.exports={input:"NewInput_input__2Agb1"}},42:function(e,t,a){e.exports={button:"Button_button__2xiU3"}},43:function(e,t,a){e.exports={input:"Input_input__3ZTlA"}},44:function(e,t,a){e.exports={form:"SetNewPass_form__JPazo",background:"SetNewPass_background__1F51k"}},45:function(e,t,a){e.exports={form:"Forgot_form__2ccYz",background:"Forgot_background__3Hif5"}},47:function(e,t,a){e.exports=a(77)},52:function(e,t,a){},53:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),s=a.n(c),o=(a(52),a(53),a(15)),u=a.n(o),l=a(5),i=a(4),m=a(7),d=a(2),p=a(6),g=a.n(p),b=a(13),f=a(3),v=a(14),E=a.n(v),h=E.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0"}),O=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return h.post("/auth/login",{email:e,password:t,rememberMe:a}).then((function(e){return e.data}))},S=function(e){return h.post("/auth/me",{token:e}).then((function(e){return e.data}))},j=function(e,t){localStorage.setItem(e,JSON.stringify(t))},w=function(e){var t=localStorage.getItem(e);if(t)return JSON.parse(t)},_="cards/signInReducer/SET_MESSAGE_TEXT",k={message:""},x=function(e){return{type:_,messageText:e}},P="cards/signInReducer/SET_USER_DATA",y="cards/signInReducer/LOGIN_SUCCESS",C={isAuth:!1,userData:null},N=function(e){return{type:P,userData:e}},R=function(e){return{type:y,isAuth:e}},T=function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S(e);case 3:n=t.sent,j("token",n.token),a(N(Object(f.a)({},n))),a(R(!0)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0.response.data.error);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},I=a(23),U=a.n(I),L=a(17),A=a(41),M=a.n(A),F=r.a.memo((function(e){var t=e.error,a=Object(L.a)(e,["error"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({className:M.a.input},a)),t&&r.a.createElement("span",null,t))})),D=a(42),G=a.n(D),H=r.a.memo((function(e){var t=e.title,a=Object(L.a)(e,["title"]);return r.a.createElement("div",null,r.a.createElement("button",Object.assign({className:G.a.button},a),t))})),J=a(20),z=a.n(J),B=r.a.memo((function(e){var t=e.messageText,a=e.isResponseError,n=e.actionCreator,c=a?"".concat(z.a.message," ").concat(z.a.error," "):z.a.message,s=Object(d.b)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:z.a.background}," "),r.a.createElement("div",{className:c},r.a.createElement("h3",null,t),r.a.createElement(H,{title:"Close",onClick:function(){s(n)}})))})),W=r.a.memo((function(e){var t=e.email,a=e.password,n=e.isRemember,c=e.messageText,s=e.changePass,o=e.changeEmail,u=e.changeIsRemember,i=e.sendFormData;return r.a.createElement("div",null,r.a.createElement("h1",null,"Sign In"),r.a.createElement("form",{onSubmit:i,className:U.a.form},r.a.createElement(F,{type:"text",placeholder:"Enter your e-mail",onChange:o,value:t}),r.a.createElement(F,{type:"password",placeholder:"Enter your password",onChange:s,value:a}),r.a.createElement(l.b,{to:Ce,className:U.a.forgotLink},"Forgot password?"),r.a.createElement("label",null,r.a.createElement(F,{type:"checkbox",className:U.a.checkbox,onChange:u,checked:n}),"Remember Me"),r.a.createElement(H,{title:"Sign in"}),r.a.createElement(l.b,{to:ye},"Registration"),c&&r.a.createElement(B,{messageText:c,isResponseError:!0,actionCreator:x("")})))})),Y=function(){var e=Object(d.c)((function(e){return e.app.message})),t=Object(d.c)((function(e){return e.signIn.isAuth})),a=Object(d.b)(),c=Object(n.useState)(""),s=Object(m.a)(c,2),o=s[0],u=s[1],l=Object(n.useState)(""),p=Object(m.a)(l,2),v=p[0],E=p[1],h=Object(n.useState)(!1),S=Object(m.a)(h,2),_=S[0],k=S[1];Object(n.useEffect)((function(){var e=w("token");e&&a(T(e))}),[a]);var P=Object(n.useCallback)((function(e){u(e.currentTarget.value)}),[u]),y=Object(n.useCallback)((function(e){E(e.currentTarget.value)}),[E]),C=Object(n.useCallback)((function(e){k(e.currentTarget.checked)}),[k]),I=Object(n.useCallback)((function(e){e.preventDefault(),a(function(e,t,a){return function(){var n=Object(b.a)(g.a.mark((function n(r){var c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,O(e,t,a);case 3:c=n.sent,j("token",c.token),r(N(Object(f.a)({},c))),r(R(!0)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),r(x(n.t0.response.data.error));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(o,v,_)),u(""),E(""),k(!1)}),[a,o,v,_]);return t?r.a.createElement(i.a,{to:Ne}):r.a.createElement(W,{email:o,password:v,isRemember:_,changeEmail:P,changePass:y,messageText:e,changeIsRemember:C,sendFormData:I})},Z=a(43),q=a.n(Z),K=function(e){var t=e.error,a=e.value,n=e.changeInput,c=Object(L.a)(e,["error","value","changeInput"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",Object.assign({className:q.a.input},c,{value:a,onChange:n})),t&&r.a.createElement("span",null,t))},X=a(29),$=a.n(X),Q="SignUpReducer/SIGN_UP_ERROR",V="SignUpReducer/IS_LOADING",ee=E.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0/"}),te={SignUpAPI:function(){var e=Object(b.a)(g.a.mark((function e(t,a){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.post("/auth/register",{email:t,password:a});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},ae={isLoading:!1,message:"",signUpSuccess:!1},ne=function(e){return{type:V,value:e}},re=function(e){return{type:Q,errorMessage:e}},ce=a(24),se=a.n(ce),oe=function(){var e=Object(n.useState)("."),t=Object(m.a)(e,2),a=t[0],c=t[1],s=Object(d.c)((function(e){return e.signUp.isLoading}));return r.a.createElement("div",{className:s?se.a.body:se.a.hide},r.a.createElement("span",{className:se.a.loadingProgress},s&&"Loading"+(setTimeout((function(){a.length<5?c(a+"."):c(".")}),1e3),a)))},ue=function(e){var t=e.login,a=e.firstPass,n=e.secondPass,c=e.setFirstPass,s=e.setLogin,o=e.setSecondPass,u=e.registerMe,l=e.similar,i=e.wrongPassword,m=e.responseMessage,d=e.isLoading;return r.a.createElement("div",{className:$.a.container},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",{className:$.a.inputs},r.a.createElement(K,{placeholder:"Enter Your email",changeInput:function(e){s(e.currentTarget.value)},type:"text",value:t}),r.a.createElement(K,{placeholder:"Enter Your Password",changeInput:function(e){c(e.currentTarget.value)},type:"password",value:a}),r.a.createElement(K,{placeholder:"Confirm Your password",changeInput:function(e){o(e.currentTarget.value)},type:"password",value:n})," ",!l&&r.a.createElement("span",null,"password does not match!")),r.a.createElement(H,{title:"Sign Up",onClick:l?u:i}),d&&r.a.createElement(oe,null),r.a.createElement("span",null,m))},le=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.signUp})),a=t.signUpSuccess,c=t.message,s=Object(n.useState)(""),o=Object(m.a)(s,2),u=o[0],l=o[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),v=f[0],E=f[1],h=Object(n.useState)(""),O=Object(m.a)(h,2),S=O[0],j=O[1],w=Object(n.useState)(""),_=Object(m.a)(w,2),k=_[0],x=_[1];Object(n.useEffect)((function(){E(!(k!==S||!k))}),[k,S]);return r.a.createElement(r.a.Fragment,null,a?r.a.createElement(i.a,{to:Pe}):r.a.createElement(ue,{login:u,setLogin:l,firstPass:S,setFirstPass:j,secondPass:k,setSecondPass:x,similar:v,registerMe:function(){var t,a;e((t=u,a=S,function(){var e=Object(b.a)(g.a.mark((function e(n){var r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,n(ne(!0)),e.next=5,te.SignUpAPI(t,a);case 5:(r=e.sent).error?n(re(r.error)):n({type:"SignUpReducer/SIGN_UP_SUCCESS",signUpSuccess:r.success}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(re(e.t0.response.data.error));case 12:n(ne(!1));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))},responseMessage:c,wrongPassword:function(){e(re("wrong credentials"))},isLoading:ne}))},ie=a(44),me=a.n(ie),de=r.a.memo((function(e){var t=e.password,a=e.passwordRepeat,n=e.sendNewPassword,c=e.changePassword,s=e.changePasswordRepeat,o=e.messageText,u=e.isResponseError;return r.a.createElement("div",null,r.a.createElement("h1",null,"Set New Password"),r.a.createElement("form",{className:me.a.form,onSubmit:n},r.a.createElement(F,{value:t,placeholder:"Enter new password",onChange:c,type:"password"}),r.a.createElement(F,{value:a,placeholder:"Repeat password",onChange:s,type:"password"}),r.a.createElement(l.b,{to:Pe},"Sign In"),r.a.createElement(H,{title:"Set password"})),o&&r.a.createElement(B,{messageText:o,isResponseError:u,actionCreator:x("")}))})),pe=E.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0"}),ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return pe.post("/auth/set-new-password",{password:e,resetPasswordToken:t}).then((function(e){return e.data}))},be="cards/setNewPassReducer/setNewPassReducer",fe={newPassSuccess:!1},ve=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),o=Object(m.a)(s,2),u=o[0],l=o[1],p=Object(d.c)((function(e){return e.app.message})),f=Object(d.c)((function(e){return e.setNewPass.newPassSuccess})),v=Object(d.b)(),E=Object(i.g)().resetToken;console.log(E);var h=Object(n.useCallback)((function(e){c(e.currentTarget.value)}),[c]),O=Object(n.useCallback)((function(e){l(e.currentTarget.value)}),[l]),S=Object(n.useCallback)((function(e){e.preventDefault(),v(a===u?function(e,t){return function(){var a=Object(b.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,ge(e,t);case 3:n({type:be,isSuccess:!0}),n(x("Success! Password changed")),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n(x(a.t0.response.data.error));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()}(a,E):x("Passwords doesn't match")),c(""),l("")}),[v,a,u,E]);return f?r.a.createElement(i.a,{to:Pe}):r.a.createElement(de,{password:a,passwordRepeat:u,sendNewPassword:S,changePassword:h,changePasswordRepeat:O,messageText:p,isResponseError:!f})},Ee=function(){var e=Object(d.c)((function(e){return e.signIn.userData})),t=Object(d.c)((function(e){return e.signIn.isAuth})),a=Object(d.b)();Object(n.useEffect)((function(){var e=w("token");e&&a(T(e))}),[a]);return t?r.a.createElement("div",null,r.a.createElement("h1",null,"Profile "),r.a.createElement("div",null,r.a.createElement("b",null,"created:")," ",null===e||void 0===e?void 0:e.created),r.a.createElement("div",null,r.a.createElement("b",null,"email:")," ",null===e||void 0===e?void 0:e.email),r.a.createElement("div",null,r.a.createElement("b",null,"isAdmin:")," ",String(null===e||void 0===e?void 0:e.isAdmin)),r.a.createElement("div",null,r.a.createElement("b",null,"name:")," ",null===e||void 0===e?void 0:e.name),r.a.createElement("div",null,r.a.createElement("b",null,"publicCardPacksCount:")," ",null===e||void 0===e?void 0:e.publicCardPacksCount),r.a.createElement("div",null,r.a.createElement("b",null,"rememberMe:")," ",String(null===e||void 0===e?void 0:e.rememberMe)),r.a.createElement("div",null,r.a.createElement("b",null,"success:")," ",String(null===e||void 0===e?void 0:e.success)),r.a.createElement("div",null,r.a.createElement("b",null,"token:")," ",null===e||void 0===e?void 0:e.token),r.a.createElement("div",null,r.a.createElement("b",null,"tokenDeathTime:")," ",null===e||void 0===e?void 0:e.tokenDeathTime),r.a.createElement("div",null,r.a.createElement("b",null,"updated:")," ",null===e||void 0===e?void 0:e.updated),r.a.createElement("div",null,r.a.createElement("b",null,"verified:")," ",String(null===e||void 0===e?void 0:e.verified)),r.a.createElement("div",null,r.a.createElement("b",null,"__v:")," ",null===e||void 0===e?void 0:e.__v),r.a.createElement("div",null,r.a.createElement("b",null,"_id:")," ",null===e||void 0===e?void 0:e._id),r.a.createElement("div",null,r.a.createElement(H,{title:"Sign Out",onClick:function(){j("token",""),a(N(null)),a(R(!1))}}))):r.a.createElement(i.a,{to:Pe})},he=a(45),Oe=a.n(he),Se=r.a.memo((function(e){var t=e.email,a=e.messageText,n=e.isResponseError,c=e.changeEmail,s=e.sendEmail;return r.a.createElement("div",null,r.a.createElement("h1",null,"Forgot"),r.a.createElement("form",{className:Oe.a.form,onSubmit:s},r.a.createElement(F,{type:"text",placeholder:"Enter your e-mail",value:t,onChange:c}),r.a.createElement(l.b,{to:Pe},"Sign In"),r.a.createElement(H,{title:"Send email"})),a&&r.a.createElement(B,{messageText:a,isResponseError:n,actionCreator:x("")}))})),je=E.a.create({baseURL:"https://cards-nya-back.herokuapp.com/1.0"}),we=function(e){return je.post("auth/forgot",{email:e,html1:"<a href='http://localhost:3000/#/set-new-password/",html2:"'>reset-password-link</a>"}).then((function(e){return e.data}))},_e="cards/forgotReducer/SET_FORGOT_SUCCESS",ke={forgotSuccess:!1},xe=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],s=Object(d.c)((function(e){return e.app.message})),o=Object(d.c)((function(e){return e.forgot.forgotSuccess})),u=Object(d.b)(),l=Object(n.useCallback)((function(e){c(e.currentTarget.value)}),[c]),p=Object(n.useCallback)((function(e){e.preventDefault(),u(function(e){return function(){var t=Object(b.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,we(e);case 3:a({type:_e,success:!0}),a(x("Success! Check your email")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(x(t.t0.response.data.error));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}(a)),c("")}),[u,a]);return o?r.a.createElement(i.a,{to:Pe}):r.a.createElement(Se,{email:a,changeEmail:l,isResponseError:!o,messageText:s,sendEmail:p})},Pe="/sign-in",ye="/sign-up",Ce="/forgot",Ne="/profile",Re=function(){return r.a.createElement(i.d,null,r.a.createElement(i.b,{path:Pe,render:function(){return r.a.createElement(Y,null)}}),r.a.createElement(i.b,{path:ye,render:function(){return r.a.createElement(le,null)}}),r.a.createElement(i.b,{path:Ce,render:function(){return r.a.createElement(xe,null)}}),r.a.createElement(i.b,{path:"".concat("/set-new-password","/:resetToken?"),render:function(){return r.a.createElement(ve,null)}}),r.a.createElement(i.b,{path:Ne,render:function(){return r.a.createElement(Ee,null)}}),r.a.createElement(i.a,{exact:!0,path:"/",to:Pe}),r.a.createElement(i.b,{path:"*",render:function(){return r.a.createElement("h2",null," 404 ERROR PAGE NOT FOUND")}}))},Te=function(){return r.a.createElement("header",{className:u.a.header},r.a.createElement("nav",{className:u.a.navMenu},r.a.createElement(l.b,{to:Pe,activeClassName:u.a.active},"Sign In"),r.a.createElement(l.b,{to:ye,activeClassName:u.a.active},"Sign Up"),r.a.createElement(l.b,{to:Ce,activeClassName:u.a.active},"Forgot"),r.a.createElement(l.b,{to:"/set-new-password",activeClassName:u.a.active},"Set New Password"),r.a.createElement(l.b,{to:Ne,activeClassName:u.a.active},"Profile")))};var Ie=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Te,null),r.a.createElement(Re,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ue=a(18),Le=a(46),Ae=Object(Ue.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object(f.a)(Object(f.a)({},e),{},{message:t.messageText});default:return e}},signUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SignUpReducer/SIGN_UP_SUCCESS":return Object(f.a)(Object(f.a)({},e),{},{message:"done!",signUpSuccess:t.signUpSuccess});case Q:return Object(f.a)(Object(f.a)({},e),{},{message:t.errorMessage});case V:return Object(f.a)(Object(f.a)({},e),{},{isLoading:t.value});default:return e}},signIn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(f.a)(Object(f.a)({},e),{},{userData:t.userData});case y:return Object(f.a)(Object(f.a)({},e),{},{isAuth:t.isAuth});default:return e}},forgot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return Object(f.a)(Object(f.a)({},e),{},{forgotSuccess:t.success});default:return e}},setNewPass:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case be:return Object(f.a)(Object(f.a)({},e),{},{newPassSuccess:t.isSuccess});default:return e}}}),Me=Object(Ue.d)(Ae,Object(Ue.a)(Le.a));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,null,r.a.createElement(d.a,{store:Me},r.a.createElement(Ie,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.4d37d72f.chunk.js.map